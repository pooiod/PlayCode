<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Layout Example</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/codemirror.min.css">
    <style>
        body {
            margin: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
        }
        .navbar {
            background-color: #333;
            color: white;
            padding: 1em;
            text-align: center;
        }
        .container {
            display: flex;
            flex: 1;
        }
        .big-box {
            flex: 1;
            background-color: #f0f0f0;
            padding: 0;
            display: flex;
            flex-direction: column;
        }
        .tab-navbar {
            display: flex;
            background-color: #444;
        }
        .tab {
            flex: 1;
            padding: 1em;
            text-align: center;
            color: white;
            cursor: pointer;
        }
        .tab:hover {
            background-color: #555;
        }
        .active {
            background-color: #666;
        }
        .big-box-content {
            flex: 1;
            padding: 1em;
            display: none;
        }
        .small-box {
            width: 300px;
            display: flex;
            flex-direction: column;
            background-color: #e0e0e0;
        }
        .top-box {
            height: 400px;
            background-color: #ccc;
        }
        .bottom-box {
            flex: 1;
            background-color: #bbb;
        }
        .editor {
            height: 100%;
            border: 1px solid #ddd;
        }
    </style>
</head>
<body>
    <div class="navbar">Top Navbar</div>
    <div class="container">
        <div class="big-box">
            <div class="tab-navbar">
                <div class="tab active" onclick="showTab('code')">Code</div>
                <div class="tab" onclick="showTab('tab2')">Tab 2</div>
                <div class="tab" onclick="showTab('tab3')">Tab 3</div>
            </div>
            <div class="big-box-content" id="code">
                <textarea id="code-editor"></textarea>
            </div>
            <div class="big-box-content" id="tab2">Content for Tab 2</div>
            <div class="big-box-content" id="tab3">Content for Tab 3</div>
        </div>
        <div class="small-box">
            <div class="top-box">Top Box (400px)</div>
            <div class="bottom-box">Bottom Box</div>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/mode/lua/lua.min.js"></script>
    <script>
        function showTab(tabId) {
            const contents = document.querySelectorAll('.big-box-content');
            contents.forEach(content => content.style.display = 'none');
            document.getElementById(tabId).style.display = 'block';

            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            document.querySelector(`.tab[onclick="showTab('${tabId}')"]`).classList.add('active');
        }

        const editor = CodeMirror.fromTextArea(document.getElementById("code-editor"), {
            lineNumbers: true,
            mode: "lua",
            theme: "default",
            viewportMargin: Infinity
        });

        showTab('code');
    </script>
</body>
</html>
